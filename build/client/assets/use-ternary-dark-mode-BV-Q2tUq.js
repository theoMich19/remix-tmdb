import{r as n}from"./components-BiZKUSio.js";let y=n.createContext(null);function R({children:e,token:r}){return n.createElement(y.Provider,{value:r},e)}function k(){let e=n.useContext(y);if(!e)throw new Error("Missing AuthenticityTokenProvider.");return e}function b({name:e="csrf"}){let r=k();return n.createElement("input",{type:"hidden",value:r,name:e})}const h=typeof window<"u"?n.useLayoutEffect:n.useEffect;function L(e){const r=n.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return h(()=>{r.current=e},[e]),n.useCallback((...a)=>r.current(...a),[r])}function w(e,r,a,d){const l=n.useRef(r);h(()=>{l.current=r},[r]),n.useEffect(()=>{const c=window;if(!(c&&c.addEventListener))return;const s=i=>{l.current(i)};return c.addEventListener(e,s,d),()=>{c.removeEventListener(e,s,d)}},[e,a,d])}const m=typeof window>"u";function M(e,r,a={}){const{initializeWithValue:d=!0}=a,l=n.useCallback(t=>a.serializer?a.serializer(t):JSON.stringify(t),[a]),c=n.useCallback(t=>{if(a.deserializer)return a.deserializer(t);if(t==="undefined")return;const u=r instanceof Function?r():r;let E;try{E=JSON.parse(t)}catch(S){return console.error("Error parsing JSON:",S),u}return E},[a,r]),s=n.useCallback(()=>{const t=r instanceof Function?r():r;if(m)return t;try{const u=window.localStorage.getItem(e);return u?c(u):t}catch(u){return console.warn(`Error reading localStorage key “${e}”:`,u),t}},[r,e,c]),[i,o]=n.useState(()=>d?s():r instanceof Function?r():r),f=L(t=>{m&&console.warn(`Tried setting localStorage key “${e}” even though environment is not a client`);try{const u=t instanceof Function?t(s()):t;window.localStorage.setItem(e,l(u)),o(u),window.dispatchEvent(new StorageEvent("local-storage",{key:e}))}catch(u){console.warn(`Error setting localStorage key “${e}”:`,u)}});n.useEffect(()=>{o(s())},[e]);const g=n.useCallback(t=>{t!=null&&t.key&&t.key!==e||o(s())},[e,s]);return w("storage",g),w("local-storage",g),[i,f]}const v=typeof window>"u";function C(e,r){const a=typeof r=="boolean"?r:(r==null?void 0:r.defaultValue)??!1,d=typeof r=="boolean"?void 0:(r==null?void 0:r.initializeWithValue)??void 0,l=o=>v?a:window.matchMedia(o).matches,[c,s]=n.useState(()=>d?l(e):a);function i(){s(l(e))}return h(()=>{const o=window.matchMedia(e);return i(),o.addListener?o.addListener(i):o.addEventListener("change",i),()=>{o.removeListener?o.removeListener(i):o.removeEventListener("change",i)}},[e]),c}const z="(prefers-color-scheme: dark)",T="usehooks-ts-ternary-dark-mode";function x(e){const r=typeof e=="string"?"system":(e==null?void 0:e.defaultValue)??"system",a=typeof e=="string"?e:(e==null?void 0:e.localStorageKey)??T,d=typeof e=="string"?void 0:(e==null?void 0:e.initializeWithValue)??void 0,l=C(z,{initializeWithValue:d}),[c,s]=M(a,r,{initializeWithValue:d});return{isDarkMode:c==="dark"||c==="system"&&l,ternaryDarkMode:c,setTernaryDarkMode:s,toggleTernaryDarkMode:()=>{const f=["light","system","dark"];s(g=>{const t=(f.indexOf(g)+1)%f.length;return f[t]})}}}export{R as A,b as a,x as u};
